YUI.add("photo-selector-photolist-interaction-view",(function(t){var e=require("hermes-core/type-validator");t.namespace("Views")[this.name]=t.Base.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.hasMultiSelect=t.primaryPhotoListConfig&&t.primaryPhotoListConfig.hasMultiSelect,this.multiSelectLimit=void 0===t.primaryPhotoListConfig.multiSelectLimit?1:t.primaryPhotoListConfig.multiSelectLimit,this.listType=t.primaryPhotoListConfig.type,this.galleryId=t.primaryPhotoListConfig.galleryId,this.isDisabled=!1,this.isDisabledSelected=!1,this},loadState:function(){var e=this,i=[];return"galleryFaves"===this.listType&&this.galleryId&&(i.push(this.appContext.getModelRegistry("gallery-photo-association-models").then((function(t){t.exists(e.galleryId+"-"+e.get("id"))&&(e.isDisabled=!0,e.isDisabledSelected=!0)}))),i.push(this.appContext.getModel("gallery-faves-models",this.appContext.getViewer().nsid+"-"+e.galleryId).then((function(t){var i=t.getValue("nonGalleryAddablePhotos").getList(),s=!1;i&&(s=i.some((function(t){return t.id===e.get("model").id}))),s&&(e.isDisabled=!0)})))),i.push(this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid).then(function(t){t.getValue("photos").getFromListByID(this.get("model").getValue("id"))&&this.set("isActive",!0)}.bind(this))),t.Promise.all(i)},buildContainer:function(){var t=this.get("model");return this.setContainerWithTemplate("photo-selector-photo-list-photo-interaction",{photo:t.toJSON(),photoPageUrl:this.get("photoPageUrl")}),this},activate:function(){var e,i,s=this.get("container"),o=s.one(".disabled-overlay");return this.galleryId&&(e=this.intlMessage({intlName:"gallery.PHOTO_CANT_ADD_TO_GALLERY",mediaType:this.get("model").getValue("mediaType")}),i=this.intlMessage({intlName:"gallery.PHOTO_ALREADY_IN_GALLERY",mediaType:this.get("model").getValue("mediaType")})),this.registerEventHandler(s.on("click",this.selectPhoto.bind(this))),this.hasMultiSelect||this.registerEventHandler(t.on("photoSelector:subviewEvent",this.handleOtherPhotoSelected,this)),this.get("isActive")?this.get("isActive")&&s.addClass("active"):s.removeClass("active"),this.isDisabled&&(s.addClass("disabled"),o.setAttribute("title",e)),this.isDisabledSelected&&(s.addClass("disabled-selected"),o.setAttribute("title",i)),this},selectPhoto:function(e){if(e.halt(),!this.isDisabled)if(this.get("isActive")&&this.hasMultiSelect)this.set("isActive",!1),this.get("container").removeClass("active"),t.fire("photoSelector:subviewEvent",{eventName:"unselectPhotoFromPhotoList",id:this.get("id")});else{if(this.hasMultiSelect)return this.appContext.getModel("profile-selected-photos-models",this.appContext.getViewer().nsid).then(function(e){e.getValue("photos").size()+1<=this.multiSelectLimit&&(this.set("isActive",!0),this.get("container").addClass("active"),t.fire("photoSelector:subviewEvent",{eventName:"selectPhotoFromPhotoList",id:this.get("id")}))}.bind(this));this.set("isActive",!0),this.get("container").addClass("active"),t.fire("photoSelector:subviewEvent",{eventName:"selectPhotoFromPhotoList",id:this.get("id")})}},handleOtherPhotoSelected:function(t){if("selectPhotoFromPhotoList"===t.eventName&&this.get("isActive")){if(t.id===this.get("id"))return;this.set("isActive",!1),this.get("container")._node&&this.get("container").removeClass("active")}}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(t,i){return e.photoId(t)}},model:{writeOnce:"initOnly"},photoPageUrl:{writeOnce:"initOnly"}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-photo-list-photo-interaction","attribute-helpers"],optionalRequires:["fluid","hermes-core"],langBundles:["common","gallery"]});YUI.add("hermes-template-photo-selector-sets-photolist-set-interaction",(function(t,e){var l=t.Template.Handlebars.revive({1:function(t,e,l,n,a){var o,s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t\t<span class="album-photo-count">'+t.escapeExpression((s(l,"intlMessage")||e&&s(e,"intlMessage")||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},{name:"intlMessage",hash:{selectedCount:null!=(o=null!=e?s(e,"album"):e)?s(o,"publicPhotosCount"):o,intlName:"album-page.PUBLIC_ITEMS_COUNT"},data:a,loc:{start:{line:6,column:36},end:{line:6,column:130}}}))+"</span>\n"},3:function(t,e,l,n,a){var o,s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'\t\t\t<span class="album-photo-count">'+t.escapeExpression((s(l,"intlMessage")||e&&s(e,"intlMessage")||t.hooks.helperMissing).call(null!=e?e:t.nullContext||{},{name:"intlMessage",hash:{selectedCount:null!=(o=null!=e?s(e,"album"):e)?s(o,"totalCount"):o,intlName:"album-page.PHOTOS_COUNT"},data:a,loc:{start:{line:8,column:35},end:{line:8,column:116}}}))+"</span>\n"},compiler:[8,">= 4.3.0"],main:function(t,e,l,n,a){var o,s=t.lookupProperty||function(t,e){if(Object.prototype.hasOwnProperty.call(t,e))return t[e]};return'<div class="photo-list-album-interaction photo-selector-album dark">\n\t<div class="interaction-bar">\n\t\t<h4 class="album-title">'+t.escapeExpression(t.lambda(null!=(o=null!=e?s(e,"album"):e)?s(o,"title"):o,e))+"</h4>\n"+(null!=(o=s(l,"if").call(null!=e?e:t.nullContext||{},null!=e?s(e,"publicOnlyPhotos"):e,{name:"if",hash:{},fn:t.program(1,a,0),inverse:t.program(3,a,0),data:a,loc:{start:{line:5,column:2},end:{line:9,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),n={};t.Array.each([],(function(e){var l=t.Template.get("hermes/"+e);l&&(n[e]=l)})),t.Template.register("hermes/photo-selector-sets-photolist-set-interaction",(function(e,a){return(a=a||{}).partials=a.partials?t.merge(n,a.partials):n,l(e,a)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("photo-selector-sets-photolist-interaction-view",(function(t){var e=require("hermes-core/type-validator");t.namespace("Views")[this.name]=t.Base.create(this.name,t.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(t){return""===this.get("container").get("innerHTML")&&this.setContainerHTML(""),this.publicOnlyPhotos=t.publicOnlyPhotos,this},loadState:function(){return this.appContext.getModel(this.get("engagementModelName"),this.get("id")).then(function(t){this.set("engagement",t)}.bind(this))},buildContainer:function(){return this.setContainerWithTemplate("photo-selector-sets-photolist-set-interaction",{album:this.get("model").toJSON(),publicOnlyPhotos:this.publicOnlyPhotos,albumPageUrl:this.get("albumPageUrl")}),this},activate:function(){return this.registerEventHandler(this.get("container").on("click",this.selectSet.bind(this))),this},selectSet:function(e){e.halt(),t.fire("photoSelector:subviewEvent",{eventName:"selectSetFromPhotoList",id:this.get("id"),title:this.get("model").getValue("title")})},destructor:function(){}},{ATTRS:{id:{writeOnce:"initOnly",validator:function(t,i){return e.photoId(t)}},model:{writeOnce:"initOnly"},albumPageUrl:{writeOnce:"initOnly"},engagement:{value:null},engagementModelName:{writeOnce:"initOnly",value:null,validator:function(e,i){return t.AttributeHelpers.validateString(e)}}}})}),"@VERSION@",{requires:["flickr-view","hermes-template-photo-selector-sets-photolist-set-interaction","attribute-helpers"],optionalRequires:["fluid","hermes-core"],langBundles:["album-page"]});YUI.add("hermes-lang-album-page_fr-fr",(function(e,t){e.Intl.add("hermes/album-page","fr-FR",{PHOTOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" photo"}]},other:{value:[{type:7},{type:0,value:" photos"}]}},offset:0,pluralType:"cardinal"}],PUBLIC_PHOTOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" photo publique"}]},other:{value:[{type:7},{type:0,value:" photos publiques"}]}},offset:0,pluralType:"cardinal"}],PUBLIC_ITEMS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" élément public"}]},other:{value:[{type:7},{type:0,value:" éléments publics"}]}},offset:0,pluralType:"cardinal"}],VIDEOS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" vidéo"}]},other:{value:[{type:7},{type:0,value:" vidéos"}]}},offset:0,pluralType:"cardinal"}],VIEWS_COUNT:[{type:6,value:"selectedCount",options:{one:{value:[{type:7},{type:0,value:" vue"}]},other:{value:[{type:7},{type:0,value:" vues"}]}},offset:0,pluralType:"cardinal"}],BACK_TO_ALBUMS:[{type:0,value:"Retour à la liste d’albums"}],EDIT_IN_ORGANIZR:[{type:0,value:"Modifier dans Organizr"}],EDIT_COVER:[{type:0,value:"Modifier la couverture"}],SELECT_COVER_PHOTO:[{type:0,value:"Sélectionnez une photo de couverture"}],SELECT:[{type:0,value:"Sélectionner"}],ERROR_COVER_PHOTO:[{type:0,value:"Un problème s’est produit lors de la tentative de définition de la photo de couverture. Veuillez réessayer."}],ERROR_UPDATING_ALBUM_TITLE_DESCRIPTION:[{type:0,value:"Une erreur s’est produite lors de la mise à jour du titre et de la description de l’album."}],ALBUM_ADD_DESCRIPTION:[{type:0,value:"Cliquez ici pour saisir une description pour cet album"}],ERROR_CREATING_PHOTOBOOK_FROM_ALBUM:[{type:0,value:"Un problème s’est produit lors de la création du livre pour cet album. Veuillez réessayer ultérieurement."}],ALBUM_DESCRIPTION:[{type:0,value:"Description de l’album"}],CREATE_BOOK_FROM_ALBUM:[{type:0,value:"Créer un livre à partir de cet album"}],DOWNLOAD_PHOTOS_AND_VIDEO:[{type:0,value:"Télécharger "},{type:6,value:"photoCount",options:{one:{value:[{type:7},{type:0,value:" photo"}]},other:{value:[{type:7},{type:0,value:" photos"}]}},offset:0,pluralType:"cardinal"},{type:0,value:" et "},{type:6,value:"videoCount",options:{one:{value:[{type:7},{type:0,value:" vidéo"}]},other:{value:[{type:7},{type:0,value:" vidéos"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_PHOTOS:[{type:0,value:"Télécharger "},{type:6,value:"photoCount",options:{one:{value:[{type:7},{type:0,value:" photo"}]},other:{value:[{type:7},{type:0,value:" photos"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_VIDEOS:[{type:0,value:"Télécharger "},{type:6,value:"videoCount",options:{one:{value:[{type:7},{type:0,value:" vidéo"}]},other:{value:[{type:7},{type:0,value:" vidéos"}]}},offset:0,pluralType:"cardinal"}],DOWNLOAD_ZIP:[{type:0,value:"Télécharger un fichier zip"}],DOWNLOAD_ZIP_PART:[{type:0,value:"Télécharger un fichier zip partie "},{type:1,value:"partSequence"}],ALOT_OF_PHOTOS:[{type:0,value:"Eh, cela fait beaucoup de photos ! Cliquez pour télécharger chaque lot sous forme de fichier zip."}],DOWNLOAD_ALBUM_NOT_AVAILABLE_ERROR:[{type:0,value:"Cet album ne contient aucune photo ni vidéo que vous pouvez télécharger."}],DOWNLOAD_ALBUM_DISABLED_ERROR:[{type:0,value:"Le téléchargement d’album n’est pas disponible actuellement. Veuillez réessayer dans quelques minutes."}],DOWNLOAD_ALBUM_GENERIC_ERROR:[{type:0,value:"Une erreur s’est produite lors du téléchargement de cet album. Veuillez réessayer."}],DOWNLOAD_ALBUM_LICENSE_MESSAGE:[{type:0,value:"Ces photos peuvent être associées à un ou plusieurs types de licence. Consultez la page de photo individuelle pour en savoir plus sur la licence associée avant de télécharger cet album."}],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT:[{type:0,value:"Ces photos peuvent être associées à un ou plusieurs types de licence. Avant de télécharger cet album, consultez les différentes pages de photos pour comprendre le type de licence désigné pour chaque image"}],DOWNLOAD_ALBUM_LICENSE_MESSAGE_ALT_2:[{type:0,value:"Ces photos sont peut-être associées à un ou plusieurs types de licence, ou leurs droits sont peut-être réservés. Avant de télécharger cet album, consultez les différentes pages de photos pour comprendre le type de licence désigné pour chaque image."}],DOWNLOAD_ALBUM_LEARN_MORE:[{type:0,value:'En savoir plus en accédant à la page <a href="https://www.flickr.com/creativecommons" target="_blank">Creative Commons</a>'}],CONFIRM_ALBUM_DELETE_NO_CONTENTS_DELETED:[{type:0,value:"Voulez-vous vraiment supprimer cet album ? (Ne vous inquiétez pas, aucun contenu ne sera supprimé.)"}],DELETE_THIS_ALBUM:[{type:0,value:"Supprimer cet album"}],SHARE_THIS_ALBUM:[{type:0,value:"Partager cet album"}],CREATE_NEW_ALBUM:[{type:0,value:"Créer un album"}],NEW_ALBUM:[{type:0,value:"Nouvel album"}],NEW_COLLECTION:[{type:0,value:"Nouveau classeur"}],VIEW_COLLECTIONS:[{type:0,value:"Afficher les classeurs"}],VIEW_MY_COLLECTIONS:[{type:0,value:"Afficher mes classeurs"}],SORT:[{type:0,value:"Trier"}],SORT_DATE_TAKEN_OLDEST:[{type:0,value:"Trier par date de prise de vue (la plus ancienne en premier)"}],SORT_DATE_TAKEN_NEWEST:[{type:0,value:"Trier par date de prise de vue (la plus récente en premier)"}],SORT_DATE_UPLOADED_OLDEST:[{type:0,value:"Trier par date d’envoi au serveur (la plus ancienne en premier)"}],SORT_DATE_UPLOADED_NEWEST:[{type:0,value:"Trier par date d’envoi au serveur (la plus récente en premier)"}],SORT_ALPHABETICALLY:[{type:0,value:"Alphabétique"}],SORT_RANDOMLY:[{type:0,value:"Aléatoire"}],SORT_REVERSE:[{type:0,value:"Ordre actuel inverse"}],SORT_ALMOST_DONE:[{type:0,value:"C’est presque fini..."}],TIMEOUT_FAILURE:[{type:0,value:"Nous ne parvenons pas à afficher cet album actuellement. Veuillez réessayer."}],OPENGRAPH_DESCRIPTION:[{type:0,value:"Découvrez cet album photo de "},{type:1,value:"owner"},{type:0,value:" sur Flickr !"}],EDIT_ALBUM:[{type:0,value:"Modifier l’album"}],DELETE_ALBUM:[{type:0,value:"Supprimer l’album"}],DELETE_ALBUM_CONFIRMATION:[{type:0,value:"Êtes-vous sûr(e) de vouloir supprimer cet album ?"}],REMOVE_PHOTO_TITLE:[{type:0,value:"Supprimer la photo"}],REMOVE_PHOTO_MESSAGE:[{type:0,value:"Voulez-vous vraiment supprimer cette photo de l’album ?"}],SORT_TAKEN_OLDEST:[{type:0,value:"Date taken (oldest first)"}],SORT_TAKEN_NEWEST:[{type:0,value:"Date taken (newest first)"}],SORT_UPLOADED_OLDEST:[{type:0,value:"Date uploaded (oldest first)"}],SORT_UPLOADED_NEWEST:[{type:0,value:"Date uploaded (newest first)"}],SORT_RANDOM:[{type:0,value:"Random"}],SORT_MANUAL_BEGINNING:[{type:0,value:"Manual (add to beginning)"}],SORT_MANUAL_END:[{type:0,value:"Manual (add to end)"}],SORT_ALBUM_TOOLTIP:[{type:0,value:"Items you add to this album will be arranged based the sort order."}],CHANGE_SORT_ORDER_TITLE:[{type:0,value:"Change sort order?"}],CHANGE_SORT_ORDER_EXPLANATION:[{type:0,value:"If you change the way this album is sorted, your manual sort order will be lost."}],SORT_TYPE_LABEL:[{type:0,value:"Sort:"}]})}),"@VERSION@",{requires:["intl"]});YUI.add("hermes-template-fluid-modal-nav-bar",(function(n,l){var e=n.Template.Handlebars.revive({1:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return null!=(o=r(e,"unless").call(null!=l?l:n.nullContext||{},null!=l?r(l,"disabled"):l,{name:"unless",hash:{},fn:n.program(2,t,0),inverse:n.noop,data:t,loc:{start:{line:5,column:3},end:{line:7,column:14}}}))?o:""},2:function(n,l,e,a,t){var o,r,u=null!=l?l:n.nullContext||{},i=n.hooks.helperMissing,c="function",s=n.escapeExpression,m=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'\t\t\t<li data-id="'+s(typeof(r=null!=(r=m(e,"id")||(null!=l?m(l,"id"):l))?r:i)===c?r.call(u,{name:"id",hash:{},data:t,loc:{start:{line:6,column:16},end:{line:6,column:22}}}):r)+'" data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:36},end:{line:6,column:45}}}):r)+'" '+(null!=(o=m(e,"if").call(u,null!=l?m(l,"searchPillConfig"):l,{name:"if",hash:{},fn:n.program(3,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:47},end:{line:6,column:113}}}))?o:"")+' class="link '+(null!=(o=m(e,"if").call(u,null!=l?m(l,"selected"):l,{name:"if",hash:{},fn:n.program(5,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:126},end:{line:6,column:157}}}))?o:"")+" "+(null!=(o=m(e,"if").call(u,null!=l?m(l,"hiddenByDefault"):l,{name:"if",hash:{},fn:n.program(7,t,0),inverse:n.noop,data:t,loc:{start:{line:6,column:158},end:{line:6,column:194}}}))?o:"")+'" tabindex="0"><a data-value="'+s(typeof(r=null!=(r=m(e,"value")||(null!=l?m(l,"value"):l))?r:i)===c?r.call(u,{name:"value",hash:{},data:t,loc:{start:{line:6,column:224},end:{line:6,column:233}}}):r)+'">'+s(typeof(r=null!=(r=m(e,"name")||(null!=l?m(l,"name"):l))?r:i)===c?r.call(u,{name:"name",hash:{},data:t,loc:{start:{line:6,column:235},end:{line:6,column:243}}}):r)+"</a></li>\n"},3:function(n,l,e,a,t){var o,r=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'data-context="'+n.escapeExpression("function"==typeof(o=null!=(o=r(e,"searchPillConfig")||(null!=l?r(l,"searchPillConfig"):l))?o:n.hooks.helperMissing)?o.call(null!=l?l:n.nullContext||{},{name:"searchPillConfig",hash:{},data:t,loc:{start:{line:6,column:85},end:{line:6,column:105}}}):o)+'"'},5:function(n,l,e,a,t){return"selected"},7:function(n,l,e,a,t){return"hidden"},9:function(n,l,e,a,t){return'\t\t\t<form action="/search" method="get" role="search">\n\t\t\t\t<input type="submit" class="search-icon" tabindex="-1" aria-label="Search" role="button">\n\t\t\t\t<ul class="search-pillbox"></ul>\n\t\t\t\t<input type="text" name="text" value="" class="search-field" autocomplete="off" aria-label="Search" role="textbox">\n\t\t\t</form>\n'},11:function(n,l,e,a,t){return'\t\t\t<span role="button" class="close-x-button">\n\t\t\t\t<svg class="icon icon-close"><use xlink:href="#icon-close"></use></svg>\n\t\t\t</span>\n'},compiler:[8,">= 4.3.0"],main:function(n,l,e,a,t){var o,r=null!=l?l:n.nullContext||{},u=n.lookupProperty||function(n,l){if(Object.prototype.hasOwnProperty.call(n,l))return n[l]};return'<div class="fluid-modal-nav-bar">\n\t<div class="fluid-modal-nav-content">\n\t\t<ul class="links">\n'+(null!=(o=u(e,"each").call(r,null!=l?u(l,"links"):l,{name:"each",hash:{},fn:n.program(1,t,0),inverse:n.noop,data:t,loc:{start:{line:4,column:2},end:{line:8,column:11}}}))?o:"")+"\t\t</ul>\n"+(null!=(o=u(e,"if").call(r,null!=l?u(l,"enableSearch"):l,{name:"if",hash:{},fn:n.program(9,t,0),inverse:n.noop,data:t,loc:{start:{line:10,column:2},end:{line:16,column:9}}}))?o:"")+(null!=(o=u(e,"if").call(r,null!=l?u(l,"showCloseXButton"):l,{name:"if",hash:{},fn:n.program(11,t,0),inverse:n.noop,data:t,loc:{start:{line:17,column:2},end:{line:21,column:9}}}))?o:"")+"\t</div>\n</div>\n"},useData:!0}),a={};n.Array.each([],(function(l){var e=n.Template.get("hermes/"+l);e&&(a[l]=e)})),n.Template.register("hermes/fluid-modal-nav-bar",(function(l,t){return(t=t||{}).partials=t.partials?n.merge(a,t.partials):a,e(l,t)}))}),"@VERSION@",{requires:["template-base","handlebars-base"]});YUI.add("fluid-modal-nav-bar-view",(function(e){"use strict";var t;t={css:{nav:".fluid-modal-nav-bar",navContent:".fluid-modal-nav-content",links:".links",link:".link"},options:{}},e.FlickrView.create(this.name,e.FlickrView,[],{langBundles:this.details.langBundles,initializer:function(e){var t,i,n=this.get("breakpointConfig")||[],s=this.appContext.viewportData.getWidth();for(this.set("showCloseXButton",void 0===e.showCloseXButton||e.showCloseXButton),this.set("onClose",void 0!==e.onClose?e.onClose:async e=>{}),i=n.sort((function(e,t){return e.maxWidth-t.maxWidth})),t=0;t<i.length;t++)if(s<i[t].maxWidth){this.mobileConfig=i[t],this.set("links",this.mobileConfig.links),this.set("enableSearch",this.mobileConfig.enableSearch);break}return this.set("contextToString",{photos:this.intlMessage({intlName:"groups.PHOTOS"}),photostream:this.intlMessage({intlName:"groups.PHOTOS"}),favorites:this.intlMessage({intlName:"common.FAVORITES"}),faves:this.intlMessage({intlName:"common.FAVORITES"}),albums:this.intlMessage({intlName:"common.ALBUMS"}),everyone:this.intlMessage({intlName:"search.EVERYONE"}),contacts:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),peopleYouFollow:this.intlMessage({intlName:"search.PEOPLE_YOU_FOLLOW"}),discussions:this.intlMessage({intlName:"groups.DISCUSSIONS_LINK_LABEL"}),commons:this.intlMessage({intlName:"commons.THE_COMMONS"})}),this},loadState:function(){return this},buildContainer:function(){var e;return e={links:this.get("links"),enableSearch:this.get("enableSearch"),showCloseXButton:this.get("showCloseXButton")},this.setContainerWithTemplate("fluid-modal-nav-bar",e),this},activate:function(){var e=this.get("container"),t=this,i=e.one(".search-field");let n=e.one(".close-x-button");if(n&&this.registerEventHandler(n.on("click",(e=>{this.get("onClose")(e)}))),this.registerEventHandler(e.on("click",this.handleClick.bind(this))),this.registerEventHandler(e.on("key",this.handleClick.bind(this),"down:13")),this.get("links").forEach((function(i){i.selected&&t.set("currentSelection",e.one('.link[data-id="'+i.id+'"]'))})),this.defaultContext=this.get("links")[0].value,this.get("currentSelection").hasAttribute("data-context")){var s=JSON.parse(this.get("currentSelection").getAttribute("data-context"));this.addPill(s.pillName,this.get("contextToString")[s.scope]),this.registerEventHandler(i.on("key",this.handleSearchFieldKeydown.bind(this),"down:8"))}return this},deselectAll:function(){this.get("container").one(t.css.nav).one(t.css.navContent).one(t.css.links).all(t.css.link).removeClass("selected")},handleClick:function(t){var i,n,s=t.target,a=s.get("parentNode"),l=this.get("container"),r={},o=this.appContext.getViewer().nsid;if("a"===s.getDOMNode().tagName.toLowerCase())t.halt(),this.updateSelectionAndSearchField(a),this.fire("navigation",t);else if(s.hasClass("link"))t.halt(),this.updateSelectionAndSearchField(s),this.fire("navigation",t);else if(s.hasClass("search-pill-remover"))t.halt(),this.removeContext();else if(i=l.one(".search-field"),this.get("enableSearch")&&i&&(n=l.one(".search-field").getDOMNode(),"submit"===s.getDOMNode().type)){t.halt(),r.apiParams={},r.apiParams[e.AttributeHelpers.coerceString(n.name)]=n.value,r.id=e.SearchHelper.generateQueryString(r.apiParams)||e.guid(),r.viewerNsid=o;var h=this.get("currentSelection");h.hasAttribute("data-context")?r.contextSearch=h.getAttribute("data-id"):(this.deselectAll(),this.set("searchData",{type:"search",modelParams:r})),this.fire("search",r)}},reselectTab:function(){this.get("currentSelection")&&this.get("currentSelection").getDOMNode().click()},redoSearch:function(){var e=this.get("searchData");e&&"search"===e.type&&this.fire("search",e.modelParams)},addPill:function(t,i){var n,s={name:t};i&&(s.combo=!0,s.secondName=i),n=e.Node.create(this.templates("search-pill")(s)),this.get("container").one(".search-pillbox").appendChild(n)},removePills:function(){this.get("container").one(".search-pillbox").get("children").remove()},removeContext:function(){var t=this.get("container"),i=t.one(".search-field").getDOMNode(),n={},s=this.appContext.getViewer().nsid,a={},l=t.one('.link[data-id="'+this.defaultContext+'"]');this.removePills(),this.deselectAll(),l.addClass("selected"),this.set("currentSelection",l),a.target=l,i.value.length>0?(n.apiParams={},n.apiParams[e.AttributeHelpers.coerceString(i.name)]=i.value,n.id=e.SearchHelper.generateQueryString(n.apiParams)||e.guid(),n.viewerNsid=s,this.fire("search",n)):this.fire("navigation",a)},handleSearchFieldKeydown:function(t){var i=t.target;0===e.fluid.getTextFieldCursorPosition(i)&&""===e.fluid.getTextFieldSelection()&&this.removeContext()},updateSelectionAndSearchField:function(e){var t,i=this.get("container"),n=i.one(".search-field"),s=i.one(".search-pill");this.deselectAll(),e.addClass("selected"),this.set("currentSelection",e),this.get("currentSelection").hasAttribute("data-context")&&(t=JSON.parse(this.get("currentSelection").getAttribute("data-context"))),n&&(n.getDOMNode().value=""),t?s||this.addPill(t.pillName,this.get("contextToString")[t.scope]):s&&this.removePills()}},{ATTRS:{links:{value:[],validator:function(t){return e.Lang.isArray(t)}},currentSelection:{value:null},enableSearch:{value:!0,validator:function(t){return e.AttributeHelpers.validateBoolean(t)},setter:function(t){return e.AttributeHelpers.coerceBoolean(t)}},breakpointConfig:{value:null}}})}),"@VERSION@",{requires:["flickr-view","flickr-promise","hermes-template-fluid-modal-nav-bar","hermes-template-search-pill","attribute-helpers","search-helper"],langBundles:["common","wallart","groups","search","commons"],optional:["person-models","photo-models"]});